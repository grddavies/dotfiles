#!/bin/bash
set -euo pipefail

echo "Installing brew packages..."

if  ! command -v brew &> /dev/null; then
    # Get Homebrew package manager
    /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
fi

# Packages
{{ $brews := list
    "ast-grep"
    "bat"
    "chezmoi"
    "cmake"
    "curl"
    "eza"
    "fd"
    "fx"
    "fzf"
    "git"
    "git-delta"
    "gnu-sed"
    "gpg"
    "jq"
    "lazydocker"
    "lazygit"
    "less"
    "make"
    "mise"
    "neofetch"
    "neovim"
    "nmap"
    "opam"
    "pinentry-mac"
    "ripgrep"
    "tree-sitter-cli"
    "typst"
    "uv"
    "wget"
    "zsh"
    -}}


brew bundle --file=/dev/stdin <<EOF
{{ range ($brews | sortAlpha | uniq) -}}
brew "{{ . }}"
{{ end -}}
EOF
